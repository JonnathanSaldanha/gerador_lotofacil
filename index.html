<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador Inteligente Lotof√°cil com An√°lise Estat√≠stica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #3a7bd5);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            overflow: hidden;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #3a7bd5;
        }
        
        h1 {
            color: #1a2a6c;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .lotofacil-logo {
            background-color: #1a2a6c;
            color: white;
            display: inline-block;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.5rem;
        }
        
        .highlight {
            background-color: #ff6b6b;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section, .output-section {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        h2 {
            color: #1a2a6c;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        h3 {
            color: #1a2a6c;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }
        
        .input-info {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        input[type="text"], input[type="number"], select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
            border-color: #3a7bd5;
            outline: none;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 150px;
        }
        
        .generate-btn {
            background-color: #1a2a6c;
            color: white;
        }
        
        .generate-btn:hover {
            background-color: #0e1a4a;
            transform: translateY(-3px);
        }
        
        .clear-btn {
            background-color: #f1f3f5;
            color: #333;
        }
        
        .clear-btn:hover {
            background-color: #e9ecef;
            transform: translateY(-3px);
        }
        
        .export-btn {
            background-color: #28a745;
            color: white;
        }
        
        .export-btn:hover {
            background-color: #218838;
            transform: translateY(-3px);
        }
        
        .copy-btn {
            background-color: #17a2b8;
            color: white;
        }
        
        .copy-btn:hover {
            background-color: #138496;
            transform: translateY(-3px);
        }
        
        .import-btn {
            background-color: #6f42c1;
            color: white;
        }
        
        .import-btn:hover {
            background-color: #5a32a3;
            transform: translateY(-3px);
        }
        
        .games-container {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
            margin-bottom: 20px;
        }
        
        .game-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #3a7bd5;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .game-title {
            font-weight: bold;
            color: #1a2a6c;
            font-size: 1.2rem;
        }
        
        .game-stats {
            font-size: 0.9rem;
            color: #666;
        }
        
        .numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .number {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #3a7bd5;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1rem;
            position: relative;
        }
        
        .number.even {
            background-color: #1a2a6c;
        }
        
        .number.odd {
            background-color: #3a7bd5;
        }
        
        .number.sequence {
            background-color: #ff6b6b !important;
            transform: scale(1.1);
            z-index: 1;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }
        
        .number.hot {
            background-color: #ffcc00 !important;
            color: #333;
        }
        
        .number.cold {
            background-color: #6c757d !important;
        }
        
        .sequence-indicator {
            background-color: #ff6b6b;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
            display: inline-block;
            font-weight: bold;
        }
        
        .sequence-type {
            background-color: #4ecdc4;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        .summary {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .summary-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .summary-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1a2a6c;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .rules-info {
            background-color: #e8f4fc;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .rule-item {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3a7bd5;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background-color: #ffe6e6;
            color: #cc0000;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        
        .export-options {
            background-color: #fff3cd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .export-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .stats-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stats-table th, .stats-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #dee2e6;
        }
        
        .stats-table th {
            background-color: #1a2a6c;
            color: white;
            font-weight: 600;
        }
        
        .stats-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .hot-numbers {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .cold-numbers {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .number-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat-number {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            flex-direction: column;
            font-size: 0.8rem;
        }
        
        .hot-stat {
            background-color: #ffcc00;
            color: #333;
        }
        
        .cold-stat {
            background-color: #6c757d;
            color: white;
        }
        
        .stat-count {
            font-size: 0.7rem;
            margin-top: 2px;
        }
        
        .tab-container {
            margin-top: 20px;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            font-weight: 600;
            color: #666;
        }
        
        .tab.active {
            color: #1a2a6c;
            border-bottom-color: #1a2a6c;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .games-raw {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .prev-games-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            background-color: white;
        }
        
        .prev-game-item {
            padding: 5px;
            border-bottom: 1px solid #eee;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .prev-game-item:last-child {
            border-bottom: none;
        }
        
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        
        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .analysis-results {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .sequence-patterns {
            background-color: #e8f4fc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .pattern-item {
            background-color: white;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pattern-length {
            background-color: #4ecdc4;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .pattern-frequency {
            font-size: 0.9rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Gerador Inteligente Lotof√°cil com An√°lise Estat√≠stica</h1>
            <div class="subtitle">An√°lise autom√°tica de padr√µes + Importa√ß√£o de Excel + Sequ√™ncias baseadas em estat√≠sticas reais</div>
            <div class="lotofacil-logo">LOTOF√ÅCIL AN√ÅLISE INTELIGENTE</div>
        </header>
        
        <div class="content">
            <div class="input-section">
                <h2>Configura√ß√µes do Gerador</h2>
                
                <div class="tab-container">
                    <div class="tabs">
                        <div class="tab active" onclick="switchTab('config')">Configura√ß√µes</div>
                        <div class="tab" onclick="switchTab('previous')">Concursos Anteriores</div>
                        <div class="tab" onclick="switchTab('statistics')">Estat√≠sticas</div>
                        <div class="tab" onclick="switchTab('patterns')">Padr√µes</div>
                    </div>
                    
                    <div id="config-tab" class="tab-content active">
                        <div class="form-group">
                            <label for="gamesCount">Quantidade de Jogos a Gerar:</label>
                            <input type="number" id="gamesCount" min="1" max="100" value="12">
                        </div>
                        
                        <div class="form-group">
                            <label for="analysisDepth">Profundidade da An√°lise:</label>
                            <select id="analysisDepth">
                                <option value="5">5 concursos anteriores</option>
                                <option value="10" selected>10 concursos anteriores</option>
                                <option value="15">15 concursos anteriores</option>
                                <option value="20">20 concursos anteriores</option>
                            </select>
                            <div class="input-info">Quantos concursos anteriores considerar para an√°lise estat√≠stica</div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="useHotNumbers" checked>
                                Priorizar n√∫meros quentes (mais sorteados)
                            </label>
                            <div class="input-info">Inclui mais n√∫meros que apareceram com frequ√™ncia nos concursos anteriores</div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="useColdNumbers" checked>
                                Incluir alguns n√∫meros frios (menos sorteados)
                            </label>
                            <div class="input-info">Inclui alguns n√∫meros que apareceram com menos frequ√™ncia</div>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoSequence" checked>
                                Gerar sequ√™ncias baseadas em padr√µes reais
                            </label>
                            <div class="input-info">Analisa sequ√™ncias dos √∫ltimos jogos e aplica padr√µes similares</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="sequenceProbability">Probabilidade de Sequ√™ncia:</label>
                            <select id="sequenceProbability">
                                <option value="100">100% (todos os jogos)</option>
                                <option value="90">90% dos jogos</option>
                                <option value="80" selected>80% dos jogos</option>
                                <option value="70">70% dos jogos</option>
                                <option value="60">60% dos jogos</option>
                            </select>
                            <div class="input-info">Chance de cada jogo ter uma sequ√™ncia</div>
                        </div>
                    </div>
                    
                    <div id="previous-tab" class="tab-content">
                        <div class="form-group">
                            <label for="previousGames">Concursos Anteriores (1 por linha):</label>
                            <div class="input-info">Digite os n√∫meros de cada concurso em linhas separadas. Ex: "1,2,5,7,8,9,11,13,14,17,19,21,22,23,25"</div>
                            <div class="input-info">Ou importe de um arquivo Excel/CSV:</div>
                            <div class="buttons" style="margin-top: 10px;">
                                <div class="file-input-wrapper">
                                    <button class="import-btn" style="min-width: 200px;">üìÅ Importar do Excel/CSV</button>
                                    <input type="file" id="excelImport" accept=".csv,.xlsx,.xls,.txt" onchange="importExcelFile(event)">
                                </div>
                                <button class="copy-btn" onclick="loadLast20Games()" style="min-width: 200px;">üìã Carregar √öltimos 20 Concursos</button>
                            </div>
                            <textarea id="previousGames" placeholder="Cole aqui os concursos anteriores, um por linha"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <div class="input-info">Concursos carregados: <span id="loadedCount">0</span></div>
                            <div class="prev-games-list" id="loadedGamesList"></div>
                        </div>
                    </div>
                    
                    <div id="statistics-tab" class="tab-content">
                        <div class="form-group">
                            <h3>Frequ√™ncia dos N√∫meros</h3>
                            <div id="numberStats" class="number-stats"></div>
                        </div>
                        
                        <div class="hot-numbers">
                            <h4>N√∫meros Quentes (mais frequentes)</h4>
                            <div id="hotNumbers" class="number-stats"></div>
                        </div>
                        
                        <div class="cold-numbers">
                            <h4>N√∫meros Frios (menos frequentes)</h4>
                            <div id="coldNumbers" class="number-stats"></div>
                        </div>
                    </div>
                    
                    <div id="patterns-tab" class="tab-content">
                        <div class="form-group">
                            <h3>An√°lise de Padr√µes de Sequ√™ncia</h3>
                            <div class="input-info">An√°lise autom√°tica dos padr√µes mais comuns nos √∫ltimos concursos</div>
                            <div class="sequence-patterns" id="sequencePatterns">
                                <p>Carregue os concursos anteriores para ver a an√°lise de padr√µes.</p>
                            </div>
                        </div>
                        
                        <div class="analysis-results">
                            <h4>Estat√≠sticas de Sequ√™ncias</h4>
                            <div id="sequenceStats">
                                <p>Nenhuma an√°lise dispon√≠vel. Gere jogos primeiro.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="rules-info">
                    <h3>An√°lise Inteligente Aplicada</h3>
                    <div class="rules-grid">
                        <div class="rule-item">
                            <strong>An√°lise de Padr√µes:</strong><br>
                            ‚Ä¢ Analisa automaticamente √∫ltimos 20 concursos<br>
                            ‚Ä¢ Detecta sequ√™ncias mais frequentes<br>
                            ‚Ä¢ Ajusta probabilidades baseadas em estat√≠sticas reais<br>
                            ‚Ä¢ Identifica padr√µes de repeti√ß√£o
                        </div>
                        <div class="rule-item">
                            <strong>Importa√ß√£o Inteligente:</strong><br>
                            ‚Ä¢ Importe de Excel/CSV<br>
                            ‚Ä¢ Formato autom√°tico de dados<br>
                            ‚Ä¢ An√°lise de m√∫ltiplos concursos<br>
                            ‚Ä¢ Valida√ß√£o autom√°tica
                        </div>
                        <div class="rule-item">
                            <strong>Gera√ß√£o Baseada em Dados:</strong><br>
                            ‚Ä¢ Sequ√™ncias baseadas em padr√µes reais<br>
                            ‚Ä¢ N√∫meros quentes/frios din√¢micos<br>
                            ‚Ä¢ Probabilidades ajust√°veis<br>
                            ‚Ä¢ Exporta√ß√£o m√∫ltipla
                        </div>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="generate-btn" onclick="generateGames()">Gerar Jogos Inteligentes</button>
                    <button class="clear-btn" onclick="clearGames()">Limpar Tudo</button>
                    <button class="export-btn" onclick="analyzePatterns()" style="background-color: #6f42c1;">üîç Analisar Padr√µes</button>
                </div>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analisando estat√≠sticas e criando jogos inteligentes...</p>
                </div>
                
                <div class="error" id="error"></div>
                <div class="success" id="success"></div>
            </div>
            
            <div class="output-section">
                <h2>Jogos Gerados</h2>
                
                <div class="export-options">
                    <h3>Exportar Jogos</h3>
                    <div class="export-buttons">
                        <button class="copy-btn" onclick="copyGamesToClipboard()">üìã Copiar Jogos</button>
                        <button class="export-btn" onclick="exportToXML()">üìÑ Baixar XML</button>
                        <button class="export-btn" onclick="exportToCSV()">üìä Baixar CSV</button>
                        <button class="export-btn" onclick="exportToTXT()">üìù Baixar TXT</button>
                    </div>
                </div>
                
                <div class="games-container" id="gamesContainer">
                    <p id="noGames">Nenhum jogo gerado ainda. Configure as op√ß√µes e clique em "Gerar Jogos".</p>
                </div>
                
                <div class="summary" id="summary" style="display: none;">
                    <h3>Resumo Estat√≠stico</h3>
                    <div class="summary-grid" id="summaryGrid"></div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Distribui√ß√£o por Jogo</h4>
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Jogo</th>
                                    <th>N√∫meros Quentes</th>
                                    <th>N√∫meros Frios</th>
                                    <th>Sequ√™ncia</th>
                                    <th>Repeti√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="detailedStats"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Gerador inteligente que analisa padr√µes reais dos concursos anteriores para criar jogos otimizados.</p>
            <p>Lembre-se: loterias s√£o jogos de azar. Jogue com responsabilidade.</p>
        </footer>
    </div>

    <script>
        // Vari√°veis globais
        let generatedGames = [];
        let numberFrequency = {};
        let hotNumbers = [];
        let coldNumbers = [];
        let previousGamesList = [];
        let debounceTimer;
        let sequencePatterns = [];
        let sequenceStats = {};
        
        // Dados dos √∫ltimos 20 concursos (do mais recente para o mais antigo)
        const last20GamesData = [
            [1, 2, 6, 8, 9, 10, 11, 13, 14, 15, 16, 19, 20, 24, 25],  // 3559
            [2, 3, 4, 7, 9, 12, 13, 14, 15, 18, 20, 22, 23, 24, 25], // 3558
            [5, 6, 7, 9, 10, 13, 14, 15, 16, 17, 19, 20, 21, 22, 24], // 3557
            [1, 2, 3, 4, 5, 7, 9, 10, 12, 14, 16, 17, 19, 21, 23],   // 3556
            [1, 2, 3, 4, 7, 8, 10, 13, 14, 15, 18, 19, 20, 23, 24],  // 3555
            [1, 3, 4, 5, 8, 9, 11, 12, 14, 15, 16, 18, 22, 23, 25],  // 3554
            [1, 2, 3, 7, 8, 9, 12, 13, 16, 17, 19, 21, 22, 23, 24],  // 3553
            [4, 5, 6, 7, 11, 12, 14, 15, 16, 17, 18, 20, 21, 23, 25], // 3552
            [1, 2, 3, 7, 8, 10, 11, 12, 15, 16, 17, 19, 21, 22, 25], // 3551
            [1, 4, 6, 7, 8, 12, 13, 15, 16, 18, 19, 20, 22, 23, 24], // 3550
            [2, 5, 7, 8, 9, 11, 12, 14, 17, 20, 21, 22, 23, 24, 25], // 3549
            [4, 8, 9, 10, 11, 12, 13, 15, 16, 17, 19, 21, 23, 24, 25], // 3548
            [2, 5, 6, 7, 9, 10, 14, 15, 17, 18, 19, 20, 21, 24, 25], // 3547
            [2, 3, 5, 7, 8, 11, 12, 13, 18, 19, 20, 22, 23, 24, 25], // 3546
            [1, 4, 5, 6, 7, 8, 11, 12, 14, 17, 19, 20, 21, 22, 25],  // 3545
            [1, 4, 5, 6, 8, 10, 11, 12, 15, 17, 20, 21, 22, 23, 25], // 3544
            [1, 4, 5, 6, 7, 8, 9, 14, 15, 16, 17, 20, 21, 22, 25],   // 3543
            [1, 2, 5, 8, 11, 12, 13, 15, 18, 19, 21, 22, 23, 24, 25], // 3542
            [1, 2, 3, 4, 6, 8, 13, 14, 16, 17, 18, 19, 21, 23, 25],  // 3541
            [1, 2, 3, 5, 6, 9, 10, 13, 14, 15, 16, 18, 22, 23, 25]   // 3540
        ];
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateLoadedGamesList();
                analyzeNumberFrequency();
            }, 100);
        });
        
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            if (tabName === 'statistics') {
                analyzeNumberFrequency();
            } else if (tabName === 'patterns') {
                analyzeSequencePatterns();
            }
        }
        
        function loadLast20Games() {
            const textarea = document.getElementById('previousGames');
            const gamesText = last20GamesData.map(game => 
                game.sort((a, b) => a - b).join(',')
            ).join('\n');
            
            textarea.value = gamesText;
            updateLoadedGamesList();
            analyzeNumberFrequency();
            analyzeSequencePatterns();
            showSuccess('√öltimos 20 concursos carregados com sucesso!');
        }
        
        function importExcelFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const content = e.target.result;
                    const games = parseExcelContent(content);
                    
                    if (games.length > 0) {
                        const textarea = document.getElementById('previousGames');
                        const gamesText = games.map(game => 
                            game.sort((a, b) => a - b).join(',')
                        ).join('\n');
                        
                        textarea.value = gamesText;
                        updateLoadedGamesList();
                        analyzeNumberFrequency();
                        analyzeSequencePatterns();
                        showSuccess(`${games.length} concursos importados com sucesso!`);
                    } else {
                        showError('Nenhum jogo v√°lido encontrado no arquivo.');
                    }
                } catch (error) {
                    showError('Erro ao importar arquivo: ' + error.message);
                }
            };
            
            reader.readAsText(file);
        }
        
        function parseExcelContent(content) {
            const lines = content.split('\n');
            const games = [];
            
            lines.forEach((line, index) => {
                if (line.trim() === '') return;
                
                // Tenta diferentes formatos de separa√ß√£o
                let numbers = [];
                
                // Formato CSV com v√≠rgula
                if (line.includes(',') && !line.includes(';')) {
                    numbers = line.split(',').map(num => parseInt(num.trim()));
                }
                // Formato CSV com ponto e v√≠rgula
                else if (line.includes(';')) {
                    numbers = line.split(';').map(num => parseInt(num.trim()));
                }
                // Formato com espa√ßos
                else {
                    numbers = line.split(/\s+/).map(num => parseInt(num.trim()));
                }
                
                // Filtra n√∫meros v√°lidos
                numbers = numbers.filter(num => !isNaN(num) && num >= 1 && num <= 25);
                
                if (numbers.length === 15) {
                    games.push([...new Set(numbers)].sort((a, b) => a - b));
                }
            });
            
            return games;
        }
        
        function analyzeSequencePatterns() {
            const games = parsePreviousGames();
            if (games.length === 0) {
                document.getElementById('sequencePatterns').innerHTML = 
                    '<p>Carregue os concursos anteriores para ver a an√°lise de padr√µes.</p>';
                return;
            }
            
            // Analisa padr√µes de sequ√™ncia
            const patterns = {};
            
            games.forEach(game => {
                // Procura sequ√™ncias de 3 a 7 n√∫meros
                for (let length = 3; length <= 7; length++) {
                    for (let start = 1; start <= 25 - length + 1; start++) {
                        const sequence = Array.from({length: length}, (_, i) => start + i);
                        if (sequence.every(num => game.includes(num))) {
                            const key = `${length}-${start}`;
                            patterns[key] = (patterns[key] || 0) + 1;
                        }
                    }
                }
            });
            
            // Converte para array e ordena por frequ√™ncia
            const patternArray = Object.entries(patterns).map(([key, count]) => {
                const [length, start] = key.split('-').map(Number);
                return { length, start, count };
            }).sort((a, b) => b.count - a.count);
            
            // Atualiza estat√≠sticas
            sequenceStats = {
                totalGames: games.length,
                patterns: patternArray,
                mostCommonLength: patternArray.length > 0 ? patternArray[0].length : 0,
                patternCount: patternArray.length
            };
            
            // Atualiza a exibi√ß√£o
            updatePatternsDisplay(patternArray);
        }
        
        function updatePatternsDisplay(patterns) {
            const container = document.getElementById('sequencePatterns');
            
            if (patterns.length === 0) {
                container.innerHTML = '<p>Nenhum padr√£o de sequ√™ncia encontrado nos concursos analisados.</p>';
                return;
            }
            
            const topPatterns = patterns.slice(0, 10); // Mostra os 10 principais
            
            container.innerHTML = `
                <h4>Padr√µes de Sequ√™ncia Mais Comuns</h4>
                <p>Baseado em ${sequenceStats.totalGames} concursos analisados</p>
                ${topPatterns.map(pattern => `
                    <div class="pattern-item">
                        <div>
                            <strong>Sequ√™ncia ${pattern.length} n√∫meros:</strong> ${Array.from({length: pattern.length}, (_, i) => pattern.start + i).join(', ')}
                        </div>
                        <div>
                            <span class="pattern-length">${pattern.length} nums</span>
                            <span class="pattern-frequency">${pattern.count}x (${Math.round((pattern.count / sequenceStats.totalGames) * 100)}%)</span>
                        </div>
                    </div>
                `).join('')}
            `;
        }
        
        function parsePreviousGames() {
            if (previousGamesList.length > 0) {
                return previousGamesList;
            }
            
            const textarea = document.getElementById('previousGames');
            const lines = textarea.value.trim().split('\n');
            const games = [];
            
            lines.forEach((line, index) => {
                if (line.trim() === '') return;
                
                const numbers = line.trim()
                    .replace(/\s+/g, ',')
                    .split(',')
                    .map(num => parseInt(num.trim()))
                    .filter(num => !isNaN(num) && num >= 1 && num <= 25);
                
                if (numbers.length === 15) {
                    games.push([...new Set(numbers)].sort((a, b) => a - b));
                }
            });
            
            previousGamesList = games;
            updateLoadedCount(games.length);
            return games;
        }
        
        function updateLoadedGamesList() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                const textarea = document.getElementById('previousGames');
                const lines = textarea.value.trim().split('\n');
                const list = document.getElementById('loadedGamesList');
                const games = [];
                
                lines.forEach((line, index) => {
                    if (line.trim() === '') return;
                    
                    const numbers = line.trim()
                        .replace(/\s+/g, ',')
                        .split(',')
                        .map(num => parseInt(num.trim()))
                        .filter(num => !isNaN(num) && num >= 1 && num <= 25);
                    
                    if (numbers.length === 15) {
                        games.push([...new Set(numbers)].sort((a, b) => a - b));
                    }
                });
                
                updateLoadedCount(games.length);
                
                if (games.length === 0) {
                    list.innerHTML = '<div class="prev-game-item">Nenhum concurso v√°lido encontrado</div>';
                    previousGamesList = [];
                    return;
                }
                
                list.innerHTML = games.map((game, index) => 
                    `<div class="prev-game-item">Concurso ${index + 1}: ${game.map(n => n.toString().padStart(2, '0')).join(', ')}</div>`
                ).join('');
                
                previousGamesList = games;
            }, 300);
        }
        
        function updateLoadedCount(count) {
            document.getElementById('loadedCount').textContent = count;
        }
        
        function analyzeNumberFrequency() {
            const games = previousGamesList.length > 0 ? previousGamesList : parsePreviousGames();
            const analysisDepth = parseInt(document.getElementById('analysisDepth').value);
            const gamesToAnalyze = games.slice(0, analysisDepth);
            
            numberFrequency = {};
            for (let i = 1; i <= 25; i++) {
                numberFrequency[i] = 0;
            }
            
            gamesToAnalyze.forEach(game => {
                if (game && Array.isArray(game)) {
                    game.forEach(number => {
                        numberFrequency[number]++;
                    });
                }
            });
            
            const sortedNumbers = Object.entries(numberFrequency)
                .sort((a, b) => b[1] - a[1]);
            
            const hotCount = Math.ceil(25 * 0.3);
            const coldCount = Math.ceil(25 * 0.3);
            
            hotNumbers = sortedNumbers.slice(0, hotCount).map(([num, freq]) => parseInt(num));
            coldNumbers = sortedNumbers.slice(-coldCount).map(([num, freq]) => parseInt(num));
            
            updateNumberStatsDisplay(sortedNumbers);
        }
        
        function updateNumberStatsDisplay(sortedNumbers) {
            const statsContainer = document.getElementById('numberStats');
            const hotContainer = document.getElementById('hotNumbers');
            const coldContainer = document.getElementById('coldNumbers');
            
            statsContainer.innerHTML = '';
            hotContainer.innerHTML = '';
            coldContainer.innerHTML = '';
            
            sortedNumbers.forEach(([num, freq]) => {
                const isHot = hotNumbers.includes(parseInt(num));
                const isCold = coldNumbers.includes(parseInt(num));
                
                const statDiv = document.createElement('div');
                statDiv.className = `stat-number ${isHot ? 'hot-stat' : (isCold ? 'cold-stat' : '')}`;
                statDiv.innerHTML = `
                    <div>${parseInt(num).toString().padStart(2, '0')}</div>
                    <div class="stat-count">${freq}</div>
                `;
                statsContainer.appendChild(statDiv);
            });
            
            hotNumbers.forEach(num => {
                const hotDiv = document.createElement('div');
                hotDiv.className = 'stat-number hot-stat';
                hotDiv.innerHTML = `
                    <div>${num.toString().padStart(2, '0')}</div>
                    <div class="stat-count">${numberFrequency[num]}</div>
                `;
                hotContainer.appendChild(hotDiv);
            });
            
            coldNumbers.forEach(num => {
                const coldDiv = document.createElement('div');
                coldDiv.className = 'stat-number cold-stat';
                coldDiv.innerHTML = `
                    <div>${num.toString().padStart(2, '0')}</div>
                    <div class="stat-count">${numberFrequency[num]}</div>
                `;
                coldContainer.appendChild(coldDiv);
            });
        }
        
        function getWeightedRandomNumbers(count, previousGames) {
            const useHotNumbers = document.getElementById('useHotNumbers').checked;
            const useColdNumbers = document.getElementById('useColdNumbers').checked;
            
            let weightedPool = [];
            
            if (useHotNumbers) {
                hotNumbers.forEach(num => {
                    const weight = 3 + numberFrequency[num];
                    for (let i = 0; i < weight; i++) {
                        weightedPool.push(num);
                    }
                });
            }
            
            for (let num = 1; num <= 25; num++) {
                if (!hotNumbers.includes(num) && !coldNumbers.includes(num)) {
                    const weight = 1 + Math.max(0, numberFrequency[num] - 1);
                    for (let i = 0; i < weight; i++) {
                        weightedPool.push(num);
                    }
                }
            }
            
            if (useColdNumbers) {
                coldNumbers.forEach(num => {
                    const weight = Math.max(1, numberFrequency[num]);
                    for (let i = 0; i < weight; i++) {
                        weightedPool.push(num);
                    }
                });
            }
            
            for (let i = weightedPool.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [weightedPool[i], weightedPool[j]] = [weightedPool[j], weightedPool[i]];
            }
            
            const selected = [];
            const available = [...weightedPool];
            
            while (selected.length < count && available.length > 0) {
                const num = available.shift();
                if (!selected.includes(num)) {
                    selected.push(num);
                }
            }
            
            if (selected.length < count) {
                const needed = count - selected.length;
                const allNumbers = Array.from({length: 25}, (_, i) => i + 1)
                    .filter(n => !selected.includes(n));
                
                const additional = allNumbers
                    .sort(() => Math.random() - 0.5)
                    .slice(0, needed);
                
                selected.push(...additional);
            }
            
            return selected.sort((a, b) => a - b);
        }
        
        function getSequenceBasedOnPatterns() {
            if (sequenceStats.patterns && sequenceStats.patterns.length > 0) {
                // Escolhe um padr√£o baseado na frequ√™ncia
                const totalFrequency = sequenceStats.patterns.reduce((sum, p) => sum + p.count, 0);
                let random = Math.random() * totalFrequency;
                
                for (const pattern of sequenceStats.patterns) {
                    if (random < pattern.count) {
                        return {
                            length: pattern.length,
                            start: pattern.start
                        };
                    }
                    random -= pattern.count;
                }
            }
            
            // Fallback: sequ√™ncia aleat√≥ria
            const length = Math.random() < 0.7 ? 4 : (Math.random() < 0.8 ? 5 : (Math.random() < 0.9 ? 6 : 7));
            const maxStart = 25 - length + 1;
            const start = Math.floor(Math.random() * maxStart) + 1;
            
            return { length, start };
        }
        
        function generateGame() {
            const previousGames = parsePreviousGames();
            const analysisDepth = parseInt(document.getElementById('analysisDepth').value);
            const recentGames = previousGames.slice(0, analysisDepth);
            
            // Gera n√∫meros baseados nas estat√≠sticas
            let game = getWeightedRandomNumbers(15, recentGames);
            
            // Verifica se deve adicionar sequ√™ncia
            const autoSequence = document.getElementById('autoSequence').checked;
            const sequenceProbability = parseInt(document.getElementById('sequenceProbability').value);
            
            if (autoSequence && Math.random() * 100 < sequenceProbability) {
                const sequenceInfo = getSequenceBasedOnPatterns();
                game = addSequenceToGame(game, sequenceInfo.length, sequenceInfo.start);
            }
            
            return game.sort((a, b) => a - b);
        }
        
        function addSequenceToGame(game, length, start) {
            const sequence = Array.from({length: length}, (_, i) => start + i);
            
            // Remove n√∫meros n√£o-sequenciais que n√£o est√£o na sequ√™ncia
            const nonSequenceNumbers = game.filter(num => !sequence.includes(num));
            
            // Se j√° tem a sequ√™ncia, retorna o jogo
            if (sequence.every(num => game.includes(num))) {
                return game;
            }
            
            // Mant√©m os melhores n√∫meros (quentes primeiro)
            const sortedNumbers = nonSequenceNumbers.sort((a, b) => {
                const freqA = numberFrequency[a] || 0;
                const freqB = numberFrequency[b] || 0;
                const isHotA = hotNumbers.includes(a);
                const isHotB = hotNumbers.includes(b);
                
                if (isHotA && !isHotB) return -1;
                if (!isHotA && isHotB) return 1;
                return freqB - freqA;
            });
            
            // Mant√©m apenas os 15 - length melhores n√∫meros
            const numbersToKeep = sortedNumbers.slice(0, 15 - length);
            
            // Combina com a sequ√™ncia
            return [...numbersToKeep, ...sequence].sort((a, b) => a - b);
        }
        
        function findSequence(game) {
            for (let length = 7; length >= 3; length--) {
                for (let start = 1; start <= 25 - length + 1; start++) {
                    const sequence = Array.from({length: length}, (_, i) => start + i);
                    if (sequence.every(num => game.includes(num))) {
                        return { length, numbers: sequence };
                    }
                }
            }
            return null;
        }
        
        function generateGames() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').style.display = 'none';
            document.getElementById('success').style.display = 'none';
            
            document.getElementById('gamesContainer').innerHTML = '';
            document.getElementById('summary').style.display = 'none';
            
            const gamesCount = parseInt(document.getElementById('gamesCount').value);
            
            if (gamesCount < 1 || gamesCount > 100) {
                document.getElementById('loading').style.display = 'none';
                showError('A quantidade de jogos deve ser entre 1 e 100.');
                return;
            }
            
            const previousGames = parsePreviousGames();
            if (previousGames.length === 0) {
                document.getElementById('loading').style.display = 'none';
                showError('Nenhum concurso anterior v√°lido encontrado. Insira pelo menos um concurso.');
                return;
            }
            
            analyzeNumberFrequency();
            analyzeSequencePatterns();
            
            generatedGames = [];
            const gamesWithStats = [];
            
            for (let i = 0; i < gamesCount; i++) {
                const game = generateGame();
                
                generatedGames.push(game);
                
                const hotCount = game.filter(num => hotNumbers.includes(num)).length;
                const coldCount = game.filter(num => coldNumbers.includes(num)).length;
                const sequenceInfo = findSequence(game);
                const repeatedCount = game.filter(num => previousGames[0]?.includes(num) || 0).length;
                
                gamesWithStats.push({
                    game,
                    hotCount,
                    coldCount,
                    sequenceInfo,
                    repeatedCount
                });
            }
            
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                displayGames(gamesWithStats);
                showSuccess(`${gamesCount} jogos gerados com sucesso!`);
            }, 800);
        }
        
        function displayGames(gamesWithStats) {
            const container = document.getElementById('gamesContainer');
            const detailedStats = document.getElementById('detailedStats');
            
            if (gamesWithStats.length === 0) {
                container.innerHTML = '<p id="noGames">Nenhum jogo gerado ainda.</p>';
                return;
            }
            
            container.innerHTML = '';
            detailedStats.innerHTML = '';
            
            gamesWithStats.forEach((stats, index) => {
                const { game, hotCount, coldCount, sequenceInfo, repeatedCount } = stats;
                const sequenceNumbers = sequenceInfo ? sequenceInfo.numbers : [];
                const sequenceSet = new Set(sequenceNumbers);
                
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                gameCard.innerHTML = `
                    <div class="game-header">
                        <div class="game-title">Jogo ${index + 1}</div>
                        <div class="game-stats">
                            ${hotCount} quentes ‚Ä¢ ${coldCount} frios ‚Ä¢ ${repeatedCount} repetidos
                        </div>
                    </div>
                    <div class="numbers">
                        ${game.map(num => {
                            const isEven = num % 2 === 0;
                            const isHot = hotNumbers.includes(num);
                            const isCold = coldNumbers.includes(num);
                            const inSequence = sequenceSet.has(num);
                            let className = `number ${isEven ? 'even' : 'odd'}`;
                            if (inSequence) className += ' sequence';
                            if (isHot) className += ' hot';
                            if (isCold) className += ' cold';
                            
                            return `<div class="${className}" title="N√∫mero ${num}${isHot ? ' (Quente)' : ''}${isCold ? ' (Frio)' : ''}${inSequence ? ' (Sequ√™ncia)' : ''}">
                                ${num.toString().padStart(2, '0')}
                            </div>`;
                        }).join('')}
                    </div>
                    ${sequenceInfo ? `
                        <div class="sequence-indicator">
                            SEQU√äNCIA DE ${sequenceInfo.length}: ${sequenceNumbers.join(', ')}
                            <span class="sequence-type">${sequenceInfo.length} n√∫meros</span>
                        </div>
                    ` : ''}
                `;
                
                container.appendChild(gameCard);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${hotCount}</td>
                    <td>${coldCount}</td>
                    <td>${sequenceInfo ? sequenceInfo.length + ' n√∫meros' : 'Nenhuma'}</td>
                    <td>${repeatedCount}</td>
                `;
                detailedStats.appendChild(row);
            });
            
            displaySummary(gamesWithStats);
        }
        
        function displaySummary(gamesWithStats) {
            const summary = document.getElementById('summary');
            const summaryGrid = document.getElementById('summaryGrid');
            
            summary.style.display = 'block';
            
            const totalGames = gamesWithStats.length;
            const avgHot = (gamesWithStats.reduce((sum, stats) => sum + stats.hotCount, 0) / totalGames).toFixed(1);
            const avgCold = (gamesWithStats.reduce((sum, stats) => sum + stats.coldCount, 0) / totalGames).toFixed(1);
            const avgRepeated = (gamesWithStats.reduce((sum, stats) => sum + stats.repeatedCount, 0) / totalGames).toFixed(1);
            
            const sequenceCounts = {3: 0, 4: 0, 5: 0, 6: 0, 7: 0};
            gamesWithStats.forEach(stats => {
                if (stats.sequenceInfo) {
                    sequenceCounts[stats.sequenceInfo.length]++;
                }
            });
            
            const seq3 = ((sequenceCounts[3] / totalGames) * 100).toFixed(1);
            const seq4 = ((sequenceCounts[4] / totalGames) * 100).toFixed(1);
            const seq5 = ((sequenceCounts[5] / totalGames) * 100).toFixed(1);
            const seq6 = ((sequenceCounts[6] / totalGames) * 100).toFixed(1);
            const seq7 = ((sequenceCounts[7] / totalGames) * 100).toFixed(1);
            
            summaryGrid.innerHTML = `
                <div class="summary-item">
                    <div class="summary-value">${totalGames}</div>
                    <div class="summary-label">Jogos Gerados</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${avgHot}</div>
                    <div class="summary-label">M√©dia de Quentes</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${avgCold}</div>
                    <div class="summary-label">M√©dia de Frios</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${avgRepeated}</div>
                    <div class="summary-label">M√©dia Repetidos</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${seq4}%</div>
                    <div class="summary-label">Seq. de 4</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${seq5}%</div>
                    <div class="summary-label">Seq. de 5</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${seq6}%</div>
                    <div class="summary-label">Seq. de 6</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">${seq7}%</div>
                    <div class="summary-label">Seq. de 7</div>
                </div>
            `;
        }
        
        function copyGamesToClipboard() {
            if (generatedGames.length === 0) {
                showError('Nenhum jogo para copiar. Gere jogos primeiro.');
                return;
            }
            
            const text = generatedGames.map((game, index) => 
                `Jogo ${index + 1}: ${game.map(n => n.toString().padStart(2, '0')).join(' - ')}`
            ).join('\n');
            
            navigator.clipboard.writeText(text)
                .then(() => showSuccess('Jogos copiados para a √°rea de transfer√™ncia!'))
                .catch(() => {
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    showSuccess('Jogos copiados para a √°rea de transfer√™ncia!');
                });
        }
        
        function exportToXML() {
            if (generatedGames.length === 0) {
                showError('Nenhum jogo para exportar. Gere jogos primeiro.');
                return;
            }
            
            const xmlContent = `<?xml version="1.0" encoding="UTF-8"?>
<jogos_lotofacil>
    <data_geracao>${new Date().toISOString()}</data_geracao>
    <quantidade_jogos>${generatedGames.length}</quantidade_jogos>
    <jogos>
        ${generatedGames.map((game, index) => `
        <jogo id="${index + 1}">
            ${game.map(num => `<numero>${num}</numero>`).join('\n            ')}
        </jogo>`).join('\n        ')}
    </jogos>
    <estatisticas>
        <numeros_quentes>${hotNumbers.join(',')}</numeros_quentes>
        <numeros_frios>${coldNumbers.join(',')}</numeros_frios>
    </estatisticas>
</jogos_lotofacil>`;
            
            downloadFile(xmlContent, 'jogos_lotofacil.xml', 'application/xml');
        }
        
        function exportToCSV() {
            if (generatedGames.length === 0) {
                showError('Nenhum jogo para exportar. Gere jogos primeiro.');
                return;
            }
            
            let csvContent = 'Jogo;N1;N2;N3;N4;N5;N6;N7;N8;N9;N10;N11;N12;N13;N14;N15\n';
            
            generatedGames.forEach((game, index) => {
                const paddedGame = game.map(n => n.toString().padStart(2, '0'));
                csvContent += `Jogo ${index + 1};${paddedGame.join(';')}\n`;
            });
            
            downloadFile(csvContent, 'jogos_lotofacil.csv', 'text/csv');
        }
        
        function exportToTXT() {
            if (generatedGames.length === 0) {
                showError('Nenhum jogo para exportar. Gere jogos primeiro.');
                return;
            }
            
            const txtContent = `JOGOS LOTOF√ÅCIL - Gerado em ${new Date().toLocaleString()}\n\n` +
                generatedGames.map((game, index) => 
                    `Jogo ${index + 1}: ${game.map(n => n.toString().padStart(2, '0')).join(' - ')}`
                ).join('\n\n') +
                `\n\n--- ESTAT√çSTICAS ---\n` +
                `N√∫meros Quentes: ${hotNumbers.map(n => n.toString().padStart(2, '0')).join(', ')}\n` +
                `N√∫meros Frios: ${coldNumbers.map(n => n.toString().padStart(2, '0')).join(', ')}\n` +
                `Total de Jogos: ${generatedGames.length}`;
            
            downloadFile(txtContent, 'jogos_lotofacil.txt', 'text/plain');
        }
        
        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccess(`Arquivo ${filename} baixado com sucesso!`);
        }
        
        function clearGames() {
            generatedGames = [];
            previousGamesList = [];
            document.getElementById('previousGames').value = '';
            document.getElementById('gamesCount').value = 12;
            document.getElementById('analysisDepth').value = '10';
            document.getElementById('gamesContainer').innerHTML = '<p id="noGames">Nenhum jogo gerado ainda. Configure as op√ß√µes e clique em "Gerar Jogos".</p>';
            document.getElementById('summary').style.display = 'none';
            document.getElementById('error').style.display = 'none';
            document.getElementById('success').style.display = 'none';
            
            updateLoadedGamesList();
            analyzeNumberFrequency();
        }
        
        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }
        
        function showSuccess(message) {
            const successDiv = document.getElementById('success');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
